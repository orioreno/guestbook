(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{502:function(e,t,n){"use strict";t.a=n.p+"assets/default_success.mp3"},503:function(e,t,n){"use strict";t.a=n.p+"assets/default_failed.mp3"},510:function(e,t,n){var content=n(520);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(19).default)("1b4064a0",content,!0,{sourceMap:!1})},519:function(e,t,n){"use strict";n(510)},520:function(e,t,n){var c=n(18)(!1);c.push([e.i,'.actions[data-v-acb229e0]{opacity:.5;position:absolute;right:2em;bottom:2em}.actions[data-v-acb229e0]:hover{opacity:1}#scan[data-v-acb229e0]{background-repeat:no-repeat;background-position:50%;background-size:cover}#input[data-v-acb229e0]{background:#fff;border-radius:20px;border:none;font-size:3rem;font-weight:700;font-family:"Montserrat";text-align:center;max-width:300px;letter-spacing:10px}.camera-wrapper[data-v-acb229e0]{touch-action:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;box-sizing:border-box;position:absolute}',""]),e.exports=c},602:function(e,t,n){"use strict";n.r(t);var c=n(230),r=n(606),o=n(213),l=(n(28),n(69),n(16)),d=(n(74),n(41),n(30),n(585)),h=n(518),v=n.n(h),f=n(502),m=n(503),_={name:"InputPage",head:{title:"Scan"},data:function(){return{typed:"",checkinSuccess:null,checkinData:null,fullscreen:!1,clearTyped:null,clearTypedCounter:0,successTimeout:null,charNum:6,camera:!1,moveCamera:!1,qrcodeCameraScanner:null,cameraPosition:{x:0,y:0},defaultSuccessAudio:f.a,defaultFailedAudio:m.a}},methods:{showMessage:function(e,data,t){var n=this;clearInterval(this.clearTyped),this.clearTypedCounter=0,this.typed="",clearTimeout(this.successTimeout),this.checkinSuccess=e,this.checkinData=data;var c=3;this.stopAudio(),this.checkinSuccess&&this.$refs.successAudio?(c=this.$refs.successAudio.duration,this.$refs.successAudio.play()):!this.checkinSuccess&&this.$refs.failedAudio&&(c=this.$refs.failedAudio.duration,this.$refs.failedAudio.play()),isNaN(parseFloat(t))||(c=t),this.successTimeout=setTimeout((function(){n.checkinSuccess=null,n.message="",n.stopAudio()}),1e3*c)},onKeyup:function(e){var t=this;return this.clearTypedCounter=0,this.typed=this.typed.toUpperCase(),clearInterval(this.clearTyped),void(this.typed.length>0&&(this.clearTypedCounter=5,this.clearTyped=setInterval((function(){t.clearTypedCounter--,t.clearTypedCounter<=0&&(t.typed="")}),1e3)))},submit:function(e){var t=this;return Object(l.a)(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t.typed.length>0)){n.next=5;break}return n.next=3,t.$store.dispatch("guest/checkIn",{checkin_code:t.typed});case 3:c=n.sent,t.showMessage(c.success,c.data,e);case 5:case"end":return n.stop()}}),n)})))()},toggleFullscreen:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var element;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.fullscreen){t.next=5;break}return t.next=3,document.exitFullscreen();case 3:t.next=8;break;case 5:return element=document.querySelector("#scan"),t.next=8,element.requestFullscreen();case 8:document.activeElement.blur();case 9:case"end":return t.stop()}}),t)})))()},toggleCamera:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.qrcodeCameraScanner||(e.qrcodeCameraScanner=new d.a("camera"),v()(".camera-wrapper").draggable({listeners:{move:function(t){e.cameraPosition.x+=t.dx,e.cameraPosition.y+=t.dy,t.target.style.transform="translate(".concat(e.cameraPosition.x,"px, ").concat(e.cameraPosition.y,"px)")}}})),!0===e.camera?e.qrcodeCameraScanner.stop().then((function(t){e.camera=!1})):e.qrcodeCameraScanner.start({facingMode:"user"},{fps:10,qrbox:{width:350,height:350}},(function(t,n){null===e.checkinSuccess&&(e.typed=t,e.submit(1.5))})).then((function(t){e.camera=!0}));case 2:case"end":return t.stop()}}),t)})))()},stopAudio:function(){this.$refs.successAudio&&(this.$refs.successAudio.pause(),this.$refs.successAudio.currentTime=0),this.$refs.failedAudio&&(this.$refs.failedAudio.pause(),this.$refs.failedAudio.currentTime=0)}},watch:{moveCamera:function(){console.log(this.moveCamera)}},mounted:function(){var e=this;window.addEventListener("keydown",(function(t){document.getElementById("input").focus(),e.checkinSuccess=null,e.stopAudio()})),addEventListener("fullscreenchange",(function(t){e.fullscreen=!e.fullscreen})),document.addEventListener("onmousemove",(function(t){e.moveCamera&&(console.log(t.clientX),e.cameraScannerX=t.clientX,e.cameraScannerY=t.clientY)}))},computed:{event:function(){return this.$store.state.event.selected},bodyStyle:function(){var style={};return this.event&&(this.event.checkin_background_image&&(style["background-image"]="url("+this.event.checkin_background_image+")"),this.event.font_color&&(style.color="rgba("+this.event.font_color.r+","+this.event.font_color.g+","+this.event.font_color.b+","+this.event.font_color.a+")")),style},boxInputStyle:function(){var style={};return this.event&&(this.event.box_input_color&&(style["background-color"]="rgba("+this.event.box_input_color.r+","+this.event.box_input_color.g+","+this.event.box_input_color.b+","+this.event.box_input_color.a+")"),this.event.text_input_color&&(style.color="rgba("+this.event.text_input_color.r+","+this.event.text_input_color.g+","+this.event.text_input_color.b+","+this.event.text_input_color.a+")")),style},checkinBackgroundStyle:function(){var style={};return this.event&&(!0===this.checkinSuccess?style["background-color"]=this.event.success_overlay_color?"rgba("+this.event.success_overlay_color.r+","+this.event.success_overlay_color.g+","+this.event.success_overlay_color.b+","+this.event.success_overlay_color.a+")":"rgba(76,175,80,0.7)":!1===this.checkinSuccess&&(style["background-color"]=this.event.failed_overlay_color?"rgba("+this.event.failed_overlay_color.r+","+this.event.failed_overlay_color.g+","+this.event.failed_overlay_color.b+","+this.event.failed_overlay_color.a+")":"rgba(244,67,54,0.7)")),style}}},y=_,k=(n(519),n(85)),component=Object(k.a)(y,(function(){var e,t,n=this,l=n._self._c;return l("div",[n.event?l("div",{staticStyle:{position:"relative"},style:n.bodyStyle,attrs:{id:"scan"}},[l("audio",{ref:"successAudio"},[l("source",{attrs:{src:null!==(e=n.event.checkin_success_audio)&&void 0!==e?e:n.defaultSuccessAudio}})]),n._v(" "),l("audio",{ref:"failedAudio"},[l("source",{attrs:{src:null!==(t=n.event.checkin_failed_audio)&&void 0!==t?t:n.defaultFailedAudio}})]),n._v(" "),l("div",{staticClass:"d-flex justify-center align-center",staticStyle:{height:"100vh"},style:n.checkinBackgroundStyle},[l("div",{staticClass:"text-center"},[!0===n.checkinSuccess?l("div",[l("h1",{staticClass:"display-3",domProps:{innerHTML:n._s(n.checkinData._checkin_message.replace(/(?:\r\n|\r|\n)/g,"<br>"))}}),n._v(" "),l("div",{staticClass:"mt-5",staticStyle:{opacity:"0.75"}},[n._v("\n            "+n._s(n.$moment.unix(n.checkinData._checkin_log[0].time).format("D MMM Y HH:mm:ss"))+"\n          ")])]):0==n.checkinSuccess?l("div",[l("h1",{staticClass:"text-center display-3"},[n._v(n._s(n.checkinData))])]):n._e(),n._v(" "),l("form",{directives:[{name:"show",rawName:"v-show",value:null===n.checkinSuccess,expression:"checkinSuccess === null"}],on:{submit:function(e){return e.preventDefault(),n.submit.apply(null,arguments)}}},[l("h1",{staticClass:"mb-3"},[n._v("ENTER CHECK IN CODE")]),n._v(" "),l("input",{directives:[{name:"model",rawName:"v-model",value:n.typed,expression:"typed"}],staticClass:"text-uppercase",style:n.boxInputStyle,attrs:{type:"text",id:"input",onblur:"this.focus()",autofocus:"",length:"6",maxlength:"6"},domProps:{value:n.typed},on:{keyup:n.onKeyup,input:function(e){e.target.composing||(n.typed=e.target.value)}}}),n._v(" "),l("div",{staticClass:"mt-3",staticStyle:{opacity:"0.75","font-size":"0.8em"}},[n._v("\n              "+n._s(n.clearTypedCounter>0&&n.clearTypedCounter<=3?"Clearing in "+n.clearTypedCounter+" second...":"Â ")+"\n          ")])])]),n._v(" "),l(r.a,{staticClass:"actions",attrs:{multiple:"",rounded:""}},[l(c.a,{attrs:{title:n.camera?"Close camera":"Open camera"},on:{click:function(e){return e.stopPropagation(),n.toggleCamera.apply(null,arguments)}}},[l(o.a,[n._v(n._s(n.camera?"mdi-camera-off":"mdi-camera"))])],1),n._v(" "),l(c.a,{attrs:{title:n.fullscreen?"Exit fullscreen":"Enter fullscreen"},on:{click:function(e){return e.stopPropagation(),n.toggleFullscreen.apply(null,arguments)}}},[l(o.a,[n._v(n._s(n.fullscreen?"mdi-fullscreen-exit":"mdi-fullscreen"))])],1)],1),n._v(" "),n._m(0)],1)]):n._e()])}),[function(){var e=this._self._c;return e("div",{staticClass:"camera-wrapper"},[e("div",{staticClass:"mr-3",attrs:{id:"camera"}})])}],!1,null,"acb229e0",null);t.default=component.exports}}]);