(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{497:function(e,t,n){"use strict";n.r(t);var o=n(230),r=n(216),c=n(40),l=n(491),d=n(489),v=n(475),m=n(16),f=(n(28),n(67),n(74),n(498)),_=n.n(f),h={name:"VerificationDialog",data:function(){return{manualVerification:!1,valid:!1,password:"",passwordVisible:!1,passwordHint:"",passwordError:!1}},methods:{verify:function(){var e=this;return Object(m.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.password==e.event.password?(n={id:e.event._id,pwd:btoa(_()(e.password))},document.cookie="evtData="+JSON.stringify(n)+"; expires="+e.$moment().add(1,"hour").format("Y-MM-DD HH:mm:ss")+"; path=/",e.manualVerification=!0):(e.passwordError=!0,e.password="");case 1:case"end":return t.stop()}}),t)})))()}},computed:{event:function(){return this.$store.state.event.selected},verified:function(){if(this.event){var e="; ".concat(document.cookie).split("; evtData=");if(2===e.length){var t=JSON.parse(e.pop().split(";").shift());if(this.event._id==t.id&&atob(t.pwd)==_()(this.event.password))return this.show=!1,this.manualVerification=!0,!0}}return!1}}},k=n(85),component=Object(k.a)(h,(function(){var e=this,t=e._self._c;return t("div",[e.manualVerification||e.verified?e._t("default"):t("div",{staticClass:"d-flex justify-center align-center",staticStyle:{height:"80vh"}},[t("div",{staticClass:"text-center"},[t(r.a,[t(l.a,{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){return t.preventDefault(),e.verify.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(c.d,[e._v("\n            Enter password to access this page\n          ")]),e._v(" "),t(c.c,[t(v.a,{staticClass:"mb-5",attrs:{required:"",rules:[function(t){return!!t||(e.passwordError?"Invalid password":"Password is required")}],"append-icon":e.passwordVisible?"mdi-eye":"mdi-eye-off",type:e.passwordVisible?"text":"password",label:"Password"},on:{keyup:function(t){e.passwordError=!1},"click:append":function(t){e.passwordVisible=!e.passwordVisible}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),t(c.a,[t(d.a),e._v(" "),t(o.a,{attrs:{color:"primary",disabled:!e.valid,type:"submit"}},[e._v("\n              Verify\n            ")])],1)],1)],1)],1)])],2)}),[],!1,null,null,null);t.default=component.exports},499:function(e,t){},502:function(e,t,n){"use strict";t.a=n.p+"assets/default_success.mp3"},503:function(e,t,n){"use strict";t.a=n.p+"assets/default_failed.mp3"},511:function(e,t,n){var content=n(584);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(19).default)("470cf62a",content,!0,{sourceMap:!1})},583:function(e,t,n){"use strict";n(511)},584:function(e,t,n){var o=n(18)(!1);o.push([e.i,".preview{position:relative}.preview-remove{position:absolute;top:0}",""]),e.exports=o},604:function(e,t,n){"use strict";n.r(t);var o=n(230),r=n(601),c=n(595),l=n(597),d=n(596),v=n(594),m=n(593),f=n(491),_=n(213),h=n(475),k=n(598),w=(n(27),n(1)),x=n(16),y=(n(8),n(9),n(11),n(3),n(13),n(10),n(14),n(74),n(497)),C=n(502),S=n(503);function A(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var z={name:"SettingsPage",head:{title:"Settings"},data:function(){return{panel:0,valid:!1,deactivationCode:"",passwordVisible:!1,fileBackgroundImage:null,fileSuccessAudio:null,fileFailedAudio:null,tempBackgroundImage:null,tempSuccessAudio:null,tempFailedAudio:null,imageMaxSize:2e6,audioMaxSize:2e5,defaultSuccessAudio:C.a,defaultFailedAudio:S.a}},methods:{saveChanges:function(){var e=this;return Object(x.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.tempBackgroundImage!==e.event.checkin_background_image&&(e.event.checkin_background_image=e.tempBackgroundImage),e.tempSuccessAudio!==e.event.checkin_success_audio&&(e.event.checkin_success_audio=e.tempSuccessAudio),e.tempFailedAudio!==e.event.checkin_failed_audio&&(e.event.checkin_failed_audio=e.tempFailedAudio),t.next=5,e.$store.dispatch("event/updateEvent",e.event);case 5:!0===(n=t.sent)?window.location.reload(!0):alert(n);case 7:case"end":return t.stop()}}),t)})))()},deactivate:function(){var e=this;return Object(x.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!confirm("Are you sure want to delete event "+e.event.name+"?")){t.next=5;break}return t.next=3,e.$store.dispatch("event/deleteEvent",e.event);case 3:!0===(n=t.sent)?window.location.reload(!0):alert(n);case 5:case"end":return t.stop()}}),t)})))()}},watch:{fileBackgroundImage:function(e){var t=this;return Object(x.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e&&e.size<t.imageMaxSize)){n.next=11;break}if(!e){n.next=7;break}return n.next=4,t.$toBase64(e);case 4:n.t0=n.sent,n.next=8;break;case 7:n.t0=null;case 8:t.tempBackgroundImage=n.t0,n.next=12;break;case 11:t.tempBackgroundImage=t.event.checkin_background_image;case 12:case"end":return n.stop()}}),n)})))()},fileSuccessAudio:function(e){var t=this;return Object(x.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(e),!(e&&e.size<t.audioMaxSize)){n.next=12;break}if(!e){n.next=8;break}return n.next=5,t.$toBase64(e);case 5:n.t0=n.sent,n.next=9;break;case 8:n.t0=null;case 9:t.tempSuccessAudio=n.t0,n.next=13;break;case 12:t.tempSuccessAudio=t.event.checkin_success_audio;case 13:t.$refs.success_audio.load();case 14:case"end":return n.stop()}}),n)})))()},fileFailedAudio:function(e){var t=this;return Object(x.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e&&e.size<t.audioMaxSize)){n.next=11;break}if(!e){n.next=7;break}return n.next=4,t.$toBase64(e);case 4:n.t0=n.sent,n.next=8;break;case 7:n.t0=null;case 8:t.tempFailedAudio=n.t0,n.next=12;break;case 11:t.tempFailedAudio=t.event.checkin_failed_audio;case 12:t.$refs.failed_audio.load();case 13:case"end":return n.stop()}}),n)})))()}},computed:{event:function(){var e=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?A(Object(source),!0).forEach((function(t){Object(w.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):A(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},this.$store.state.event.selected);return e.font_color||(e.font_color={r:255,g:255,b:255,a:1}),e.box_input_color||(e.box_input_color={r:255,g:255,b:255,a:1}),e.text_input_color||(e.text_input_color={r:0,g:0,b:0,a:1}),e.success_overlay_color||(e.success_overlay_color={r:76,g:175,b:80,a:.7}),e.failed_overlay_color||(e.failed_overlay_color={r:244,g:67,b:54,a:.7}),e.checkin_background_image&&(this.tempBackgroundImage=e.checkin_background_image),e.checkin_success_audio&&(this.tempSuccessAudio=e.checkin_success_audio),e.checkin_failed_audio&&(this.tempFailedAudio=e.checkin_failed_audio),e},defaultEventName:function(){return this.$store.state.event.selected.name}},components:{PasswordVerification:y.default}},O=z,P=(n(583),n(85)),component=Object(P.a)(O,(function(){var e,t,n=this,w=n._self._c;return w("div",[w("PasswordVerification",[n.event?w(v.a,{model:{value:n.panel,callback:function(e){n.panel=e},expression:"panel"}},[w(c.a,[w(d.a,[n._v("General")]),n._v(" "),w(l.a,[w(f.a,{ref:"form",staticClass:"mt-2",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),n.saveChanges.apply(null,arguments)}},model:{value:n.valid,callback:function(e){n.valid=e},expression:"valid"}},[w(h.a,{staticClass:"mb-1",attrs:{label:"Event name *",required:"",rules:[function(e){return!!e||"Event name is required"}]},model:{value:n.event.name,callback:function(e){n.$set(n.event,"name",e)},expression:"event.name"}}),n._v(" "),w(h.a,{attrs:{required:"",rules:[function(e){return!!e||"Password is required"}],"append-icon":n.passwordVisible?"mdi-eye":"mdi-eye-off",type:n.passwordVisible?"text":"password",label:"Password *",hint:"Authentication to open guest and setting page"},on:{"click:append":function(e){n.passwordVisible=!n.passwordVisible}},model:{value:n.event.password,callback:function(e){n.$set(n.event,"password",e)},expression:"event.password"}}),n._v(" "),w("div",{staticClass:"mt-5"},[w(o.a,{attrs:{type:"submit",color:"primary"}},[n._v("Save changes")])],1)],1)],1)],1),n._v(" "),w(c.a,[w(d.a,[n._v("Check in configuration")]),n._v(" "),w(l.a,[w(f.a,{ref:"form",staticClass:"mt-2",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),n.saveChanges.apply(null,arguments)}},model:{value:n.valid,callback:function(e){n.valid=e},expression:"valid"}},[w(k.a,{staticClass:"mb-1",attrs:{label:"Check in success message",hint:"{column name} will be replaced by column value"},model:{value:n.event.checkin_success_message,callback:function(e){n.$set(n.event,"checkin_success_message",e)},expression:"event.checkin_success_message"}}),n._v(" "),w("div",{staticClass:"row"},[w("div",{staticClass:"col-sm-6"},[w("div",{staticClass:"d-flex"},[w(m.a,{attrs:{accept:"image/png, image/jpeg, image/jpg, image/bmp",placeholder:"Pick a background image","prepend-icon":"mdi-image",rules:[function(e){return!e||e.size<n.imageMaxSize||"File size should be less than "+n.imageMaxSize/1e6+" MB!"}],"show-size":"",hint:"PNG/JPEG/JPG/BPM file less than "+n.imageMaxSize/1e6+"MB","persistent-hint":"",label:"Background image"},model:{value:n.fileBackgroundImage,callback:function(e){n.fileBackgroundImage=e},expression:"fileBackgroundImage"}})],1)]),n._v(" "),w("div",{staticClass:"col-sm-5 preview"},[n.tempBackgroundImage?w("img",{staticStyle:{"max-width":"100%","max-height":"200px"},attrs:{src:n.tempBackgroundImage}}):w("div",{staticClass:"pa-5 bg-secondary"},[n._v("No background image")])]),n._v(" "),w("div",{staticClass:"col-sm-1"},[null!==n.tempBackgroundImage?w(o.a,{staticClass:"my-3",attrs:{fab:"","x-small":"",color:"red",title:"Remove background"},on:{click:function(e){e.stopPropagation(),n.tempBackgroundImage=null}}},[w(_.a,{attrs:{dark:""}},[n._v("\n                    mdi-delete\n                  ")])],1):n._e()],1)]),n._v(" "),w("div",{staticClass:"row"},[w("div",{staticClass:"col-sm-6"},[w(m.a,{attrs:{accept:"audio/ogg, audio/mp3, audio/wav",placeholder:"Pick a success sound","prepend-icon":"mdi-music",rules:[function(e){return!e||e.size<n.audioMaxSize||"File size should be less than "+n.audioMaxSize/1e3+" KB!"}],"show-size":"",hint:"OGG/MP3/WAV file less than "+n.audioMaxSize/1e3+"KB","persistent-hint":"",label:"Check in success audio"},model:{value:n.fileSuccessAudio,callback:function(e){n.fileSuccessAudio=e},expression:"fileSuccessAudio"}})],1),n._v(" "),w("div",{staticClass:"col-sm-5 preview"},[w("audio",{ref:"success_audio",attrs:{controls:""}},[w("source",{attrs:{src:null!==(e=n.tempSuccessAudio)&&void 0!==e?e:n.defaultSuccessAudio}}),n._v("\n                  Your browser does not support the audio element.\n                ")])]),n._v(" "),w("div",{staticClass:"col-sm-1"},[null!==n.tempSuccessAudio?w(o.a,{staticClass:"my-3",attrs:{fab:"","x-small":"",color:"red",title:"Change to default"},on:{click:function(e){e.stopPropagation(),n.tempSuccessAudio=null,n.fileSuccessAudio=null,n.$refs.success_audio.load()}}},[w(_.a,{attrs:{dark:""}},[n._v("\n                    mdi-redo-variant\n                  ")])],1):n._e()],1)]),n._v(" "),w("div",{staticClass:"row"},[w("div",{staticClass:"col-sm-6"},[w(m.a,{attrs:{accept:"audio/ogg, audio/mp3, audio/wav",placeholder:"Pick a failed sound","prepend-icon":"mdi-music",rules:[function(e){return!e||e.size<n.audioMaxSize||"File size should be less than "+n.audioMaxSize/1e3+" KB!"}],"show-size":"",hint:"OGG/MP3/WAV file less than "+n.audioMaxSize/1e3+"KB","persistent-hint":"",label:"Check in failed audio"},model:{value:n.fileFailedAudio,callback:function(e){n.fileFailedAudio=e},expression:"fileFailedAudio"}})],1),n._v(" "),w("div",{staticClass:"col-sm-5 preview"},[w("audio",{ref:"failed_audio",attrs:{controls:""}},[w("source",{attrs:{src:null!==(t=n.tempFailedAudio)&&void 0!==t?t:n.defaultFailedAudio}}),n._v("\n                  Your browser does not support the audio element.\n                ")])]),n._v(" "),w("div",{staticClass:"col-sm-1"},[null!==n.tempFailedAudio?w(o.a,{staticClass:"my-3",attrs:{fab:"","x-small":"",color:"red",title:"Change to default"},on:{click:function(e){e.stopPropagation(),n.tempFailedAudio=null,n.fileFailedAudio=null,n.$refs.failed_audio.load()}}},[w(_.a,{attrs:{dark:""}},[n._v("\n                    mdi-redo-variant\n                  ")])],1):n._e()],1)]),n._v(" "),w("div",{staticClass:"row"},[w("div",{staticClass:"col-lg-4 col-sm-6"},[w("label",[n._v("Font color")]),n._v(" "),w(r.a,{model:{value:n.event.font_color,callback:function(e){n.$set(n.event,"font_color",e)},expression:"event.font_color"}})],1),n._v(" "),w("div",{staticClass:"col-lg-4 col-sm-6"},[w("label",[n._v("Box input color")]),n._v(" "),w(r.a,{model:{value:n.event.box_input_color,callback:function(e){n.$set(n.event,"box_input_color",e)},expression:"event.box_input_color"}})],1),n._v(" "),w("div",{staticClass:"col-lg-4 col-sm-6"},[w("label",[n._v("Text input color")]),n._v(" "),w(r.a,{model:{value:n.event.text_input_color,callback:function(e){n.$set(n.event,"text_input_color",e)},expression:"event.text_input_color"}})],1),n._v(" "),w("div",{staticClass:"col-lg-4 col-sm-6"},[w("label",[n._v("Success overlay color")]),n._v(" "),w(r.a,{model:{value:n.event.success_overlay_color,callback:function(e){n.$set(n.event,"success_overlay_color",e)},expression:"event.success_overlay_color"}})],1),n._v(" "),w("div",{staticClass:"col-lg-4 col-sm-6"},[w("label",[n._v("Failed overlay color")]),n._v(" "),w(r.a,{model:{value:n.event.failed_overlay_color,callback:function(e){n.$set(n.event,"failed_overlay_color",e)},expression:"event.failed_overlay_color"}})],1)]),n._v(" "),w("div",{staticClass:"mt-5"},[w(o.a,{attrs:{type:"submit",color:"primary"}},[n._v("Save changes")])],1)],1)],1)],1),n._v(" "),w(c.a,[w(d.a,{attrs:{color:"error"}},[n._v("Deactivate")]),n._v(" "),w(l.a,[w(f.a,{ref:"form",staticClass:"mt-2",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),n.deactivate.apply(null,arguments)}},model:{value:n.valid,callback:function(e){n.valid=e},expression:"valid"}},[w(h.a,{staticClass:"mb-1",attrs:{label:"Enter event name for confirmation",required:"",rules:[function(e){return!!e||"Please enter current event name"},function(e){return e==n.defaultEventName||"Event name does not match"}]},model:{value:n.deactivationCode,callback:function(e){n.deactivationCode=e},expression:"deactivationCode"}}),n._v(" "),w("div",{staticClass:"mt-5"},[w(o.a,{attrs:{type:"submit",color:"error"}},[n._v("Deactivate current event")])],1)],1)],1)],1)],1):n._e()],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{PasswordVerification:n(497).default})}}]);